"use strict";function accordeonFood(){var g=document.querySelectorAll(".food__item");function h(){var e=document.documentElement.clientWidth,t=document.querySelectorAll(".food__vertical"),n=e-parseInt(getComputedStyle(t[0]).width)*t.length;return 520<n?520:n}document.querySelector(".accordeon--vertical").addEventListener("click",function(e){e.preventDefault();var t=e.target;if(t.classList.contains("food__vertical")){var n=t.parentNode,a=t.nextElementSibling,r=!0,o=!1,i=void 0;try{for(var l,c=g[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;s!==n&&(s.classList.remove("food__description--active"),s.lastElementChild.style.width=0)}}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}n.classList.contains("food__description--active")?(n.classList.remove("food__description--active"),a.style.width=0):(n.classList.add("food__description--active"),a.style.width=h()+"px")}else if(t.classList.contains("food__name")){var d=t.parentNode.parentNode,u=t.parentNode.nextElementSibling,v=!0,p=!1,m=void 0;try{for(var f,y=g[Symbol.iterator]();!(v=(f=y.next()).done);v=!0){var _=f.value;_!==d&&(_.classList.remove("food__description--active"),_.lastElementChild.style.width=0)}}catch(e){p=!0,m=e}finally{try{v||null==y.return||y.return()}finally{if(p)throw m}}d.classList.contains("food__description--active")?(d.classList.remove("food__description--active"),u.style.width=0):(d.classList.add("food__description--active"),u.style.width=h()+"px")}})}function accordeonTeam(){var u=document.querySelectorAll(".team__item");document.querySelector(".team__list").addEventListener("click",function(e){e.preventDefault();var t=e.target;if(t.classList.contains("team__link")){var n=t.parentNode,a=t.nextElementSibling,r=a.firstElementChild.clientHeight,o=!0,i=!1,l=void 0;try{for(var c,s=u[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;d!==n&&(d.classList.remove("team__item--active"),d.lastElementChild.style.height=0)}}catch(e){i=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}n.classList.contains("team__item--active")?(n.classList.remove("team__item--active"),a.style.height=0):(n.classList.add("team__item--active"),a.style.height=r+"px")}})}accordeonFood(),accordeonTeam();var myForm=document.querySelector("#delievery"),orderButton=document.querySelector("#orderButton");function validateForm(e){var t=!0;return validateField(e.elements.name)||(t=!1),validateField(e.elements.phone)||(t=!1),validateField(e.elements.delievery)||(t=!1),t}function validateField(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}orderButton.addEventListener("click",function(e){if(e.preventDefault(),validateForm(myForm)){var t={name:myForm.elements.name.value,phone:myForm.elements.phone.value,comment:myForm.elements.delievery.value,to:"test@mail.ru"},n=new XMLHttpRequest;n.responseType="json",n.open("POST","https://webdev-api.loftschool.com/sendmail"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(JSON.stringify(t)),n.addEventListener("load",function(){if(n.response.statusText<=200){renderPopup("Ответ от сервера","Данные получены")}else{renderPopup("Ответ от сервера","Ошибка сервера")}})}});var burger=document.querySelector(".hamburger-menu"),overlay=document.querySelector(".menu"),body=document.querySelector("body"),links=document.querySelectorAll(".menu__link");function toggleMenu(){burger.classList.toggle("hamburger-menu--active"),overlay.classList.toggle("menu--active"),body.classList.toggle("body--active")}links.forEach(function(e){e.addEventListener("click",toggleMenu)}),burger.addEventListener("click",toggleMenu);var player,onePageScroll=function(){function n(e,t){e.eq(t).addClass("active").siblings().removeClass("active")}function r(e){if(!l){l=!0;var t=function(e){return"".concat(-100*e,"%")}(e);n(o,e),n($(".pagination__item"),e),i.css({transform:"translateY(".concat(t,")")}),setTimeout(function(){l=!1},1300)}}function a(e){var t=o.filter(".active"),n=t.next(),a=t.prev();"next"===e&&n.length&&r(n.index()),"prev"===e&&a.length&&r(a.index())}var o=$(".page"),i=$(".main-content"),l=!1,e=new MobileDetect(window.navigator.userAgent).mobile();$(document).on({wheel:function(e){var t=e.originalEvent.deltaY;a(0<t?"next":"prev")},keydown:function(e){var t=e.target.tagName.toLowerCase();if(!("input"===t||"textarea"===t))switch(e.keyCode){case 40:a("next");break;case 38:a("prev")}}}),$("[data-scroll-to]").on("click",function(e){e.preventDefault(),r(parseInt($(e.currentTarget).attr("data-scroll-to")))}),e&&(window.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),$("body").swipe({swipe:function(e,t){var n;"up"===t&&(n="next"),"down"===t&&(n="prev"),a(n)}}))};onePageScroll();var formatTime=function(e){var t=Math.round(e),n=Math.floor(t/60),a=t-60*n,r=a<10?"0".concat(a):a;return"".concat(n,":").concat(r)},onPlayerReady=function(){var e,n=player.getDuration();$(".player__duration-estimate").text(formatTime(n)),void 0!==e&&clearInterval(e),e=setInterval(function(){var e=player.getCurrentTime(),t=e/n*100;$(".player__playback-button").css({left:"".concat(t,"%")}),$(".player__duration-completed").text(formatTime(e))},1e3)},eventsInit=function(){$(".player__start").on("click",function(e){e.preventDefault(),$(e.currentTarget).hasClass("paused")?player.pauseVideo():player.playVideo()}),$(".player__playback").on("click",function(e){var t=$(e.currentTarget),n=(e.pageX-t.offset().left)/t.width()*100,a=player.getDuration()/100*n;$(".player__playback-button").css({left:"".concat(n,"%")}),player.seekTo(a)}),$(".player__splash").on("click",function(e){player.playVideo()})},onPlayerStateChange=function(e){var t=$(".player__start");switch(e.data){case 1:$(".player__wrapper").addClass("active"),t.addClass("paused");break;case 2:t.removeClass("paused")}};function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{height:"405",width:"660",videoId:"KEkrWRHCDQU",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0}})}eventsInit();var popupFeedback=function(){document.querySelector(".feedback__list").addEventListener("click",function(e){e.target.classList.contains("feedback__btn")&&renderPopup(e.target.parentNode.querySelector(".feedback__subtitle").textContent,e.target.parentNode.querySelector(".feedback__text").textContent)})};function renderPopup(e,t){var n=document.querySelector(".popup");n.classList.add("popup--active"),n.querySelector(".popup__title").textContent=e,n.querySelector(".popup__text").textContent=t,n.querySelector(".popup__exit").addEventListener("click",function(e){e.preventDefault(),n.classList.remove("popup--active")})}popupFeedback();var sliderBurger=function(){var e=document.querySelector(".arrow__slide--left"),t=document.querySelector(".arrow__slide--right"),n=document.querySelector("#slider");function a(e){"right"===e?n.appendChild(n.firstElementChild):n.insertBefore(n.lastElementChild,n.firstElementChild)}t.addEventListener("click",function(e){e.preventDefault(),a("right")}),e.addEventListener("click",function(e){e.preventDefault(),a("left")})};sliderBurger();